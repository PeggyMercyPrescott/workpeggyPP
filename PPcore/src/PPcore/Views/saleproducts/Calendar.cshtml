<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12" style="padding-top:15px;">
        </div>
    </div>

    <div class="panel panel-blue">
        <div class="panel-heading">
            <div class="pull-left" style="margin-top:3px;"><span>ปฏิทินแผนการจำหน่ายผลิตผล</span></div>

        </div>
<div class="panel-body">
    <div id="calendarInfo" >
        <div class="row">
            <div class="col-md-6"><div id='calendar'></div></div>
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading"><h4 id="displaydate"></h4></div>
                    <div class="panel-body">
                        
                        <div >
                            <div class="box">
                                <div class="box-inner">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam eu sem tempor, varius quam at, luctus dui. Mauris magna metus, dapibus nec turpis vel, semper malesuada ante. Vestibulum id metus ac nisl bibendum scelerisque non non purus. Suspendisse varius nibh non aliquet sagittis. In tincidunt orci sit amet elementum vestibulum. Vivamus fermentum in arcu in aliquam. Quisque aliquam porta odio in fringilla. Vivamus nisl leo, blandit at bibendum eu, tristique eget risus. Integer aliquet quam ut elit suscipit, id interdum neque porttitor. Integer faucibus ligula.</div>
                            </div>

                        </div>

                        <div class="dataTable_wrapper" style="padding-right:10px;" id="a_details_as_table">



                        </div>

                    </div>
                </div>

            </div>
        </div>





    </div>


    <!-- detailsSaleProduct -->
    <div id="detailsSaleProduct" class="col-md-12" style="display:none;position:absolute;margin-left:-20px;">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="pull-left">
                    <div class="btn btn-default btn-panel-yellow " onclick="hideDetails()">&nbsp;<i class="fa fa-mail-reply" aria-hidden="true" style="color:white;"></i>&nbsp;&nbsp;&nbsp;กลับ&nbsp;&nbsp;&nbsp;&nbsp;</div>
                </div>

                <div class="pull-right">
                    <div id="btnReserve" class="btn btn-default btn-panel-yellow ">&nbsp;&nbsp;&nbsp;จอง&nbsp;&nbsp;&nbsp;&nbsp;</div>
                </div>

                <div style="margin-left:100px;height:35px;">
                    <ol class="breadcrumb" id="breadcrumbGroup"></ol>
                </div>
            </div>

            <div class="panel-body">
                <h1 id="saleproduct_desc"></h1>
                <h3 id="totalAmount"></h3>

                <div class="row">
                    <div class="col-md-6">

                        <div id="saleproductImage" class="carousel slide" data-ride="carousel" data-interval="false" style="background-color:#1F1F1F;">

                            <ol id="saleproductImageIndicators" class="carousel-indicators">
                                <li data-target="#saleproductImage" data-slide-to="0" class="active"></li>
                            </ol>


                            <div id="saleproductImageInner" class="carousel-inner" role="listbox">
                                <div class="item active">
                                    <img src="">
                                </div>
                            </div>

                            <a class="left carousel-control" href="#saleproductImage" role="button" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="right carousel-control" href="#saleproductImage" role="button" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-8">


                                <div class="panel panel-default">
                                    <div class="panel-body" style="background-color:lightgray">
                                        <div class="row">
                                            <div class="col-md-8 text-right">
                                                <strong>ราคาขายปลีก:</strong><br />
                                                <strong>ราคาขายส่ง:</strong><br />
                                                <strong>เงื่อนไขสินค้าราคาส่ง:</strong><br />
                                                <strong>สั่งล่วงหน้า:</strong><br />
                                                <strong>พร้อมจัดส่ง:</strong><br />

                                            </div>
                                            <div class="col-md-4" style="margin-left:-10px;">

                                                <em id="retail_price"></em> <strong>บาท</strong><br />
                                                <em id="wholesale_price"></em> <strong>บาท</strong><br />
                                                <em id="wholesale_condition"></em><br />
                                                <em id="advance_order_condition"></em><br />
                                                <em id="store_quantity"></em> <strong id="store_quantity_unit"></strong><br />
                                            </div>
                                        </div>

                                        <hr />

                                        <div class="row">
                                            <div class="col-md-8 text-right">
                                                <strong>ระยะเวลาในการเก็บรักษา:</strong><br />
                                                <strong>กำลังการผลิตต่อวัน:</strong><br />
                                                <strong>กำลังการต่อเดือน:</strong><br />


                                            </div>
                                            <div class="col-md-4" style="margin-left:-10px;">
                                                <em id="product_life"></em><br />
                                                <em id="capacity_per_day"></em><br />
                                                <em id="capacity_per_month"></em><br />


                                            </div>
                                        </div>

                                        <hr />

                                        <div class="col-md-12">
                                            <p><strong>ช่องทางในการจำหน่าย:</strong></p>
                                            <p><em id="distribution_channels"></em></p>
                                        </div>
                                        <div class="col-md-12">
                                            <p><strong>การขนส่ง:</strong></p>
                                            <p><em id="delivery"></em></p>
                                        </div>


                                    </div>
                                    <!-- /.panel-body -->
                                </div>
                                <!-- /.panel -->

                            </div>

                            <div class="col-md-4">
                                <div class="panel panel-default">
                                    <div class="panel-heading">ช่องทางการสั่งซื้อ</div>
                                    <div class="panel-body">
                                        <p><strong>โทรศัพท์:</strong></p>
                                        <p><em id="contact_telephone"></em></p>
                                        <p><strong>อีเมล:</strong></p>
                                        <p><em id="contact_email"></em></p>
                                        <p><strong>อื่นๆ:</strong></p>
                                        <p><em id="contact_other"></em></p>
                                    </div>
                                    <!-- /.panel-body -->
                                </div>
                                <!-- /.panel -->

                                <div class="panel panel-default">
                                    <div class="panel-heading">การรับรองมาตรฐาน</div>
                                    <div class="panel-body" style="margin-left:-25px;" id="standardUL">
                                    </div>
                                    <!-- /.panel-body -->
                                </div>
                                <!-- /.panel -->

                            </div>



                        </div>


                    </div>



                </div>






                <div class="panel panel-default">
                    <div class="panel-heading">รายละเอียดสินค้า</div>
                    <div class="panel-body" id="product_detail">
                        ทดสอบ
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">ข้อมูลอื่นๆ</div>
                    <div class="panel-body" id="x_note">
                        -
                    </div>
                </div>



            </div>
        </div>

    </div>
    <!-- detailsSaleProduct -->



</div>

    </div>






</div>


@section Scripts {

<link href="~/lib/fullcalendar/dist/fullcalendar.min.css" rel="stylesheet" />
<link href="~/lib/fullcalendar/dist/fullcalendar.print.css" rel="stylesheet" media='print' />
<script src="~/lib/bootstrap/js/modal.js"></script>
<script src="~/lib/fullcalendar/dist/fullcalendar.min.js"></script>
<script src="~/lib/fullcalendar/dist/lang/th.js"></script>

<script src="~/lib/bootstrap/js/carousel.js"></script>

<style type="text/css">
        .box {
            float: right;
            overflow: hidden;
            background: #f0e68c;
            position: absolute;
    right: 0px;
    top: 0px;
    z-index:2;
        }
        /* Add padding and border to inner content
    for better animation effect */
        .box-inner {
            width: 400px;
            height:300px;
            padding: 10px;
            border: 1px solid #a29415;
        }
</style>

<style>
    #calendar {
        padding: 0;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
        font-size: 14px;
        max-width: 900px;
        margin: 0 auto;
    }
    .fc-event{
        cursor: pointer;
    }
    .carousel-control.left, .carousel-control.right {
        background: none !important;
        filter: none !important;
        progid: none !important;
    }
</style>

    <script>
        $(document).ready(function () {
            $(".box").hide();
            var today = new Date();
            $('#calendar').attr('style', '');

            $('#calendar').fullCalendar({
                defaultDate: today,
                editable: false,
                eventLimit: true,
                events: function (start, end, timezone, callback) {
                    $.ajax({
                        url: '@Url.Action("getCalendarEvents", "saleproducts")',
                        data: {
                            cstart: start.unix(),
                            cend: end.unix()
                        },
                        success: function (resp) {
                            var events = [];
                            if (resp != "") {
                                resp = JSON.parse(resp);
                                for (var i = 0; i < resp.length; i++) {
                                    events.push({
                                        title: resp[i].title,
                                        start: resp[i].start
                                    });
                                }
                            }
                            callback(events);
                        }
                    });
                },
                eventClick: function (calEvent, jsEvent, view) {
                    getTableReserve(calEvent.start); 
                    //$(this).css('color', 'red');
                }
            });
            var today = new Date();
            var tday = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            getTableReserve(new Date().getTime());
        });

        function getTableReserve(rdate) {
            //var drdate = new Date(rdate);
            //$('#displaydate').html(drdate);
            $.ajax({
                type: 'get', cache: false, url: '@Url.Action("DetailsSaleProductByReservationAsTable", "saleproducts")' + '?rdate=' + rdate,
            }).done(function (resp) {
                $('#a_details_as_table').html(resp);
                var w = [
                    { "targets": [0], "width": "15", "className": "dt-center" },
                    { "targets": [1], "visible": false, "searchable": false },
                    { "targets": [3], "className": "dt-center" },
                    { "targets": [4], "className": "dt-center" },
                    { "targets": [5], "className": "dt-center" },
                    { "targets": [6], "className": "dt-center" },
                    { "targets": [7], "className": "dt-center" },
                ];
                var table = setTable_default($('#a_table'), w);
                table.$('tr:first').click();
                $('#displaydate').html($('#showdate').html());
            });
        }

        function detailsClick(saleproduct_code) {
            //$("#calendarInfo").toggle("slide", { direction: "left" }, 500);
            //$("#detailsSaleProduct").toggle("slide", { direction: "right" }, 500);
            //$(".box").show();
            $(".box").animate({
                width: "toggle"
            });

        }
        function showDetails(saleproduct_code) {
            $.ajax({
                type: 'post', url: '@Url.Action("Details", "saleproducts")' + '?saleproduct_code=' + saleproduct_code,
            }).done(function (resp) {
                if (resp != "") {
                    resp = JSON.parse(resp);
                    $('#breadcrumbGroup').html(resp.breadcrumb);


                    var is = resp.images.substring(0, resp.images.length - 1);
                    var iss = is.split('|');
                    var dList = []; var urlPath = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');
                    $('#saleproductImageIndicators').empty();
                    $('#saleproductImageInner').empty();
                    for (var i = 0; i < iss.length; i++) {
                        var cActive = ""; var cActive2 = "";
                        if (i == 0) { cActive = 'class="active"'; cActive2 = "active" }
                        $('#saleproductImageIndicators').append('<li data-target="#saleproductImage" data-slide-to="' + i + '" ' + cActive + '></li>');
                        $('#saleproductImageInner').append('<div class="item ' + cActive2 + '"><img style="height:400px;width:auto;" class="img-responsive center-block" src="' + urlPath + '@Url.Action("image", "pic_image")' + "?id=" + iss[i] + '"></div>');
                    }

                    //console.log($('#saleproductImageIndicators').html());
                    //console.log($('#saleproductImageInner').html());


                    $('#saleproduct_desc').html(resp.saleproduct_desc);
                    $('#totalAmount').html("จำนวน <em>" + resp.total_quantity + "</em> " + resp.saleproduct_unit);

                    $('#retail_price').html(resp.retail_price);
                    $('#wholesale_price').html(resp.wholesale_price);
                    $('#wholesale_condition').html(resp.wholesale_condition);

                    $('#advance_order_condition').html(resp.advance_order_condition);
                    $('#store_quantity').html(resp.store_quantity);
                    $('#store_quantity_unit').html(resp.saleproduct_unit);


                    $('#product_life').html(resp.product_life);
                    $('#capacity_per_day').html(resp.capacity_per_day);
                    $('#capacity_per_month').html(resp.capacity_per_month);

                    $('#distribution_channels').html(resp.distribution_channels);
                    $('#delivery').html(resp.delivery);

                    $('#contact_telephone').html(resp.contact_telephone);
                    $('#contact_email').html(resp.contact_email);
                    $('#contact_other').html(resp.contact_other);

                    $('#standardUL').html(resp.standardUL);

                    $('#product_detail').html(resp.product_detail);
                    $('#x_note').html(resp.x_note);

                    $('#btnReserve').off('click').on('click', function () {
                        reserve(saleproduct_code);
                    });

                    $("#searchResult").toggle("slide", { direction: "left" }, 500);
                    $("#detailsSaleProduct").toggle("slide", { direction: "right" }, 500);
                }
            });

        }

        function hideDetails() {
            $("#searchResult").toggle("slide", { direction: "left" }, 500);
            $("#detailsSaleProduct").toggle("slide", { direction: "right" }, 500);
        }


    </script>
}
